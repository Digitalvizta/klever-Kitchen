<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <record id="view_account_payment_form_inherited1" model="ir.ui.view">
            <field name="name">account.payment.inherit1.form</field>
            <field name="model">account.payment</field>
            <field name="inherit_id" ref="account.view_account_payment_form"/>
            <field name="arch" type="xml">

                <!-- Insert new notebook pages for checks -->
                <xpath expr="//form/sheet" position="inside">
                    <notebook>

                        <page string="Checks"
                              invisible="payment_type == 'inbound' or payment_subtype != 'issue_check'">
                            <field name="issued_check_ids" readonly="state != 'draft'"/>
                        </page>

                        <page string="Checks"
                              invisible="payment_type == 'inbound' or payment_subtype != 'third_check'">
                            <field name="delivered_third_check_ids"
                                   widget="many2many"
                                   readonly="state != 'draft'"
                                   domain="[('type','=','third_check'),('state', '=', 'holding'),('third_handed_voucher_id', '=', False),('journal_id', '=', journal_id)]"
                                   context="{'default_type':'third_check'}"/>
                        </page>

                        <page string="Checks" invisible="payment_subtype != 'third_check' or payment_type != 'inbound'">
                            <field name="received_third_check_ids" readonly="state != 'draft'">
                                <list>
                                    <field name="journal_id"/>
                                    <field name="number"/>
                                    <field name="issue_date"/>
                                    <field name="payment_date"/>
                                    <field name="amount"/>
                                    <field name="state"/>
                                </list>
                                <form>
                                    <h2>
                                        <field name="name"/>
                                    </h2>

                                    <group>
                                        <group>
                                            <field name="bank_id"/>
                                            <field name="number"/>
                                            <field name="amount"/>
                                        </group>
                                        <group>

                                            <field name="owner_name"/>
                                            <field name="vat"/>
                                            <field name="issue_date"/>
                                            <field name="payment_date"/>
                                        </group>
                                    </group>
                                    <!-- Note/Description at the end -->
<!--        <group>-->
<!--            <field name="description" placeholder="Add a description or note here..."/>-->
<!--        </group>-->
                                </form>

                            </field>
                        </page>

                    </notebook>
                </xpath>

                <!-- Additional fields after partner_id -->
                <field name="partner_id" position="after">
                    <field name="payment_subtype" invisible="1"/>
                    <field name="dummy_journal_id" invisible="1"/>
                    <field name="paylines_amount" invisible="1"/>
                </field>

                <!-- Add amount_readonly before journal_id -->
                <field name="journal_id" position="before">
                    <field name="amount_readonly" string="Total Amount"/>
                </field>

                <!-- Style label -->
                <xpath expr="//label[@for='amount']" position="attributes">
                    <attribute name="style">color: white;</attribute>
                </xpath>

                <!-- Hide amount div -->
                <xpath expr="//div[@name='amount_div']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>

                <!-- Monetary fields after journal_id -->
                <field name="journal_id" position="after">
                    <field name="checks_amount"
                           widget="monetary"
                           options="{'currency_field': 'currency_id'}"
                           invisible="payment_subtype == False"/>

                    <field name="net_amount"
                           widget="monetary"
                           options="{'currency_field': 'currency_id'}"
                           invisible="payment_subtype != False"
                           readonly="0"/>

                    <field name="currency_id"
                           options="{'no_create': True, 'no_open': True}"
                           required="1"
                           invisible="payment_subtype != False"
                           readonly="state != 'draft'"
                           groups="base.group_multi_currency"/>
                </field>

            </field>
        </record>

    </data>
</odoo>

<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <record id="view_product_template_form_inherit_custom" model="ir.ui.view">
        <field name="name">product.template.form.inherit.custom</field>
        <field name="model">product.template</field>
        <field name="inherit_id" ref="product.product_template_only_form_view"/>
        <field name="arch" type="xml">

            <!-- General -->
            <xpath expr="//sheet/notebook/page[@name='general_information']//field[@name='default_code']"
                   position="after">
                <field name="product_tag_ids" widget="many2many_tags"/>
                     <field name="shelf_life_days"/>

            </xpath>

            <!-- Add domain dynamically -->
            <xpath expr="//field[@name='categ_id']" position="attributes">
                <attribute name="domain">[('id', 'in', allowed_category_ids)]</attribute>
            </xpath>

            <!-- Manufacturer Tab -->
            <xpath expr="//sheet/notebook" position="inside">
                <page string="Manufacturer">
                    <group string="Basic Information">
                        <group>
                            <field name="manufacturer_id" context="{'res_partner_search_mode': 'supplier'}"/>
                            <field name="manufacturer_pname"/>
                        </group>
                        <group>
                            <field name="manufacturer_pref"/>
                            <field name="information_owner_gln"/>
                            <field name="manufacturer_sku"/>

                        </group>
                        <group>
                            <field name="manufacturer_brand"/>
                            <field name="manufacturer_purl" widget="url"/>
                        </group>
                        <group>
                            <field name="previous_manufacturer_code"/>
                            <field name="trade_item_date_on_pack_type"/>
                        </group>
                    </group>

                    <group string="Composition  Shelf Life">
                        <field name="ingredients"/>
                        <field name="contains"/>
                    </group>

                    <group string="Manufacturer Documents">
                        <group>
                            <field name="specification_sheet" filename="specification_sheet_fname"/>
                            <field name="nutrition_facts" filename="nutrition_facts_fname"/>
                        </group>
                        <group>
                            <field name="allergen_statement" filename="allergen_statement_fname"/>
                            <field name="coa_document" filename="coa_document_fname"/>
                        </group>
                        <group>
                            <field name="barcode_image" filename="barcode_image_fname"/>
                            <field name="label_image" filename="label_image_fname"/>
                        </group>
                    </group>
                </page>
            </xpath>

            <!-- Marketing Tab -->
            <xpath expr="//sheet/notebook" position="inside">
                <page string="Marketing">
                    <group>
                        <field name="brand_name"/>
                        <field name="marketing_message"/>
                        <field name="basic_preparation_text"/>
                        <field name="serving_information"/>
                    </group>
                    <group string="Marketing Documents">
                        <field name="pos_image" filename="pos_image_fname"/>
                        <field name="formulation_statement_1" filename="formulation_statement_1_fname"/>
                        <field name="formulation_statement_2" filename="formulation_statement_2_fname"/>
                    </group>
                </page>
            </xpath>

            <!-- Packaging Attributes (renamed Inventory Packaging) -->
            <xpath expr="//sheet/notebook" position="inside">
                <page string="Packaging Attributes">
                    <group>
                        <field name="inventory_location"/>
                    </group>
                    <group string="Pack Size">
                        <field name="pack_size_qty_1"/>
                        <field name="pack_size_qty_2"/>
                        <field name="pack_size_uom"/>
                        <field name="pack_container_type"/>
                        <field name="pack_size_display" readonly="1"/>
                    </group>
                    <group string="Weight  Box">
                        <field name="net_weight"/>
                        <field name="net_weight_uom"/>
                        <field name="box_type"/>
                    </group>
                    <group string="Dimensions (Fractions allowed)">
                        <field name="package_height"/>
                        <field name="package_depth"/>
                        <field name="package_width"/>
                        <field name="package_weight"/>
                        <field name="package_weight_uom"/>
                        <field name="package_cubic_feet" readonly="1"/>
                    </group>
                    <group string="Pallet">
                        <field name="layers_per_pallet"/>
                        <field name="items_per_layer"/>
                        <field name="pallet_height"/>
                    </group>
                </page>
            </xpath>

            <!-- Sales Tab: show cost & sales price for sold products -->
            <xpath expr="//sheet/notebook/page[@name='sales']" position="inside">
                <group string="Pricing">
                    <field name="standard_price"/>
                    <field name="list_price"/>
                    <field name="taxes_id"/>
                </group>
            </xpath>

            <!-- Hide the default_code field -->
            <xpath expr="//field[@name='default_code']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>

            <xpath expr="//field[@name='type']" position="after">
                <field name="product_category_type" required="1"/>
                <field name="auto_code" readonly="1" force_save="1"/>
            </xpath>

             <!-- Change label of Internal Notes -->
            <xpath expr="//field[@name='description']" position="attributes">
                <attribute name="string">Description</attribute>
            </xpath>

        </field>
    </record>

    <record id="view_product_template_tree_inherit_sequence" model="ir.ui.view">
        <field name="name">product.template.tree.inherit.sequence</field>
        <field name="model">product.template</field>
        <field name="inherit_id" ref="product.product_template_tree_view"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='name']" position="before">
                <field name="auto_sequence_code" string="Code"/>
            </xpath>
        </field>
    </record>
</odoo>
